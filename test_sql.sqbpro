<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="C:/temp/argo/test.db" readonly="0" foreign_keys="1" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="1000" synchronous="2"/><attached/><window><main_tabs open="structure browser pragmas query" current="3"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="100"/><column_width id="3" width="545"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/></tab_structure><tab_browse><current_table name="4,6:mainPerson"/><default_encoding codec=""/><browse_table_settings><table schema="main" name="Person" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="40"/><column index="2" value="66"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table></browse_table_settings></tab_browse><tab_sql><sql name="SQL 1">SELECT json_extract(t1.jsonData, '$.name'), jsonData
FROM Person t1
WHERE json_extract(t1.jsonData, '$.callTypes') IS NOT NULL 
	AND EXISTS (
		SELECT 1 FROM json_each(t1.jsonData, '$.callTypes') t2 
		WHERE json_extract(t2.value, '$.typeName') == 1
			AND EXISTS (
				SELECT 1 FROM json_each(t2.value, '$.typeValues') t3
				WHERE t3.value == 'V3'
					   )
				)


-- select * from Person
-- delete from Person
-- drop table Person

/*
CREATE TABLE Person (
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	jsonData JSON not null
)
*/


/*
INSERT INTO Person (jsonData) VALUES (json('{
	&quot;name&quot;: &quot;Person2&quot;,
	&quot;roles&quot;: [ &quot;role1&quot;, &quot;anotherRole2&quot; ],
	&quot;callTypes&quot;: [{
		&quot;typeName&quot;: 1,
		&quot;typeValues&quot;: [&quot;V3&quot;]
	}, {
		&quot;typeName&quot;: 2,
		&quot;typeValues&quot;: [&quot;V1&quot;, &quot;V2&quot;]
	}]
}'));

INSERT INTO Person (jsonData) VALUES (json('{
	&quot;name&quot;: &quot;Person1&quot;,
	&quot;roles&quot;: [ &quot;role1&quot;, &quot;anotherRole&quot; ],
	&quot;callTypes&quot;: [ ]
}'));
*/
</sql><current_tab id="0"/></tab_sql></sqlb_project>
